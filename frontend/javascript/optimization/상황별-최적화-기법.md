#Optimization

# 상황별 최적화 기법

자바스크립트/프론트엔드 개발에서 자주 만나는 케이스 기준 상황별 최적화 기법을 소개한다.

## 1️⃣ 검색창 입력 (자동완성, 실시간 검색)

- **디바운스** → 입력이 끝난 후 일정 시간(예: 300ms) 지나면 요청
- **결과 캐싱** → 동일한 키워드 재입력 시 서버 호출 없이 캐싱된 값 반환
- **취소 가능한 fetch** → `AbortController`로 불필요한 API 요청 취소

## 2️⃣ 스크롤 이벤트 (무한 스크롤, 애니메이션)

- **쓰로틀링** → 스크롤 이벤트를 16ms~100ms 단위로 제한
- **requestAnimationFrame** → 스크롤 기반 애니메이션 최적화
- **가상 스크롤(Virtualized List)** → 한 번에 전체 DOM을 렌더링하지 않고, 화면에 보이는 요소만 그리기 (`react-window`, `react-virtualized`)

## 3️⃣ 대규모 데이터 렌더링 (테이블, 리스트 1만 개 이상)

- **가상화(Rendering Virtualization)** → 보이는 부분만 렌더링
- **Web Worker** → 무거운 데이터 가공 로직을 백그라운드에서 처리
- **Pagination (페이지네이션)** → 한 번에 전부 불러오지 않고 나눠서 불러오기

## 4️⃣ 이미지 & 리소스 최적화

- **Lazy Loading** → `<img loading="lazy">`
- **Responsive Image** → `srcset`과 `sizes` 속성으로 기기별 최적화된 이미지 제공
- **Preloading / Prefetching** → 사용자가 곧 볼 가능성이 높은 리소스 미리 불러오기
- **CDN 활용** → 지리적으로 가까운 서버에서 이미지/JS 제공

## 5️⃣ 애니메이션 (CSS / Canvas / JS 기반)

- **requestAnimationFrame** → setInterval 대신 애니메이션 루프 제어
- **CSS Transform/Opacity 활용** → `left/top` 변경 대신 GPU 가속 되는 `transform: translate3d` 사용
- **Will-change** 속성 → 애니메이션 대상 미리 GPU 레이어로 올려두기

## 6️⃣ API 호출 최적화

- **Batching** → 여러 요청을 하나로 묶기 (예: GraphQL Batch)
- **캐싱 & 중복 제거** → 동일한 요청 반복 방지
- **Prefetch** → 사용자가 곧 이동할 페이지 데이터 미리 불러오기
- **Stale-While-Revalidate** → 캐시 데이터 즉시 보여주고, 뒤에서 최신화 (React Query, SWR)

## 7️⃣ 초기 로딩 속도 개선 (웹앱, SPA)

- **Code Splitting** → 라우트 단위로 번들 분리
- **Tree Shaking** → 사용하지 않는 코드 제거
- **Dynamic Import** → 자주 쓰이지 않는 기능은 필요할 때만 불러오기
- **Service Worker 캐시** → 앱 재방문 시 속도 개선

## 8️⃣ 메모리 관리 / 장시간 동작하는 앱 (대시보드, 게임)

- **이벤트 리스너 정리** → 더 이상 필요 없는 핸들러는 `removeEventListener`
- **객체 풀링(Object Pooling)** → 빈번히 생성/삭제되는 객체는 재사용
- **메모리 누수 점검** → 클로저, setInterval, 전역 변수 방치하지 않기

## 9️⃣ 브라우저 렌더링 최적화

- **리플로우 최소화**
  - DOM 변경 모아서 적용 (`documentFragment`)
  - `getBoundingClientRect()` 같은 layout 관련 메서드 호출 최소화
- **CSS 최적화** → 복잡한 선택자 줄이고, 애니메이션은 GPU 가속 가능한 속성 위주
- **Virtual DOM / 프레임워크 최적화** → React: `useMemo`, `useCallback`, `memo` 등

## 요약

- **이벤트 처리** → 디바운스/쓰로틀/rAF
- **대량 데이터** → 가상화 / Web Worker
- **네트워크** → 캐싱 / 코드 스플리팅 / 프리페치
- **렌더링** → 리플로우 최소화 / GPU 활용
- **메모리** → 리스너 정리 / 누수 방지

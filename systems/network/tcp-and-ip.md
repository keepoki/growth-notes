#Network

# TCP / IP

* **TCP/IP**는 인터넷에서 데이터를 주고받기 위한 **기본 통신 규약(프로토콜 집합)** 이에요.
* 정식 이름은 **Transmission Control Protocol / Internet Protocol**.
* 사실 TCP/IP는 단일 프로토콜이 아니라, **인터넷에서 쓰이는 프로토콜들을 묶은 모델**을 말합니다.

## TCP/IP 모델의 4계층

OSI 7계층(이론적 모델)을 단순화한 것이 TCP/IP 4계층이에요.

1. **네트워크 인터페이스 계층**
   * 실제 물리적 전송 (LAN, Wi-Fi, 케이블 등)
   * OSI 1\~2계층(물리/데이터링크)과 유사
   * 예: Ethernet, Wi-Fi, ARP

2. **인터넷 계층**
   * 데이터를 목적지까지 전달(주소 지정, 라우팅)
   * 대표: **IP(Internet Protocol)**
   * 예: IPv4, IPv6, ICMP, ARP

3. **전송 계층**
   * 송수신 프로그램 간 "데이터 전송 방식" 담당
   * 대표: **TCP**, **UDP**
     * **TCP**: 연결 지향, 신뢰성(순서, 재전송, 흐름제어)
     * **UDP**: 비연결, 빠름, 신뢰성 보장 없음

4. **응용 계층**
   * 사용자가 직접 쓰는 서비스/앱 레벨
   * 예: HTTP, FTP, SMTP, DNS

## TCP vs UDP

둘 다 전송 계층 프로토콜인데 방식이 다릅니다.

* **TCP**
  * 연결지향 (전화 통화처럼 연결을 확립)
  * 데이터 순서 보장, 누락 시 재전송
  * 속도 느리지만 신뢰성 높음
  * 예: 웹브라우징(HTTP/HTTPS), 이메일(SMTP), 파일전송(FTP)

* **UDP**
  * 비연결 (편지·쪽지처럼 그냥 보냄)
  * 순서 보장 X, 손실 시 재전송 X
  * 속도 빠름, 실시간성 중요할 때 사용
  * 예: 영상통화, 온라인게임, 스트리밍

## 우체국 택배 시스템으로 비유

* **응용 계층** = 내가 보내려는 "편지 내용" (예: 러브레터, 계약서, 사진)
* **전송 계층(TCP/UDP)** = 봉투에 어떻게 담고 보낼지 결정
  * TCP = 등기우편 (배달 확인, 잃어버리면 다시 보내줌, 순서대로 도착)
  * UDP = 엽서 (빠르고 저렴하지만 중간에 잃어버리면 끝)
* **인터넷 계층(IP)** = 주소 쓰기 (서울시 강남구 …) → 목적지까지 길 찾기
* **네트워크 계층** = 실제 우체부, 배달차, 도로 (물리적 전송 수단)

즉, 인터넷에서 데이터를 보낼 때도

1. 봉투에 넣고(TCP/UDP)
2. 주소(IP) 붙이고
3. 택배차/비행기(Ethernet/Wi-Fi)로 보내는 식입니다.

## 정리

* TCP/IP = 인터넷 통신의 "언어/규칙 세트"
* 계층 구조: 네트워크 인터페이스 → 인터넷(IP) → 전송(TCP/UDP) → 응용(HTTP 등)
* TCP = 신뢰성/순서 보장, UDP = 빠름/가벼움
* **비유**: 우체국 택배 (주소=IP, 봉투=TCP/UDP, 내용=응용 데이터)

---

## **웹 브라우저에서 네이버를 접속할 때 TCP/IP 계층별로 어떤 일이 벌어지는질까?**

### 1. 응용 계층 (Application Layer)

* 브라우저가 **사용자 요청을 생성**하는 단계입니다.
* 예: 주소창에 `www.naver.com` 입력 → HTTP GET 요청 생성

```text
GET / HTTP/1.1
Host: www.naver.com
```

* 이 요청은 **웹페이지 HTML, CSS, JS 등**을 받아오기 위한 데이터입니다.

**비유:** 우체국에서 "편지 작성" 단계. (내용 + 받는 사람 지정 준비)

### 2. 전송 계층 (Transport Layer) — TCP

* 브라우저는 **TCP 연결**을 통해 서버와 통신
* 3-way handshake: 연결 설정
  1. 클라이언트 → 서버: SYN (연결 요청)
  2. 서버 → 클라이언트: SYN+ACK (승인)
  3. 클라이언트 → 서버: ACK (승인 확인)
* 연결 후 HTTP 요청 데이터가 **작은 패킷**으로 나뉘어 전송
* TCP 특징: **순서 보장, 오류 검출, 재전송**
* 예: 각 패킷에 순번 부여 → 서버에서 순서대로 재조립

**비유:** 편지를 **봉투에 넣고 등기우편**으로 발송.

* 순서가 깨지면 재배치, 분실되면 재발송

### 3. 인터넷 계층 (Internet Layer) — IP

* 각 TCP 패킷은 **IP 패킷**으로 감싸져 목적지 주소(IP)를 가짐
* 라우터가 인터넷을 통해 최적 경로를 찾아 전달
* IPv4 예: 223.130.195.95 (naver.com 서버 IP)
* 패킷은 여러 경로를 통해 이동 가능 → 도착 후 재조립

**비유:** 주소를 봉투에 붙이고 **우편 라벨** 부착, 배달 경로 지정

### 4. 네트워크 인터페이스 계층 (Network Interface / Link Layer)

* 실제 **물리적 전송** 담당
* LAN/Wi-Fi → 케이블/무선 신호 통해 패킷 전달
* MAC 주소, Ethernet 프레임 사용
* 패킷이 다른 네트워크 장비를 지나면서 전달

**비유:** 배달차, 비행기, 우체부가 실제로 편지를 전달

### 5. 서버 수신 & 응답

* 서버 도착 → TCP/IP 계층 역순 처리:
  1. Link Layer → IP 패킷 추출
  2. TCP → 순서 재조립, 오류 확인
  3. HTTP 요청 처리 → HTML/CSS/JS 응답 생성
* 서버에서 클라이언트로 **응답 패킷** 전송 → 인터넷을 통해 되돌아감

**비유:** 수신인(서버)이 편지를 열어 확인하고 답장 작성 → 다시 우체국 배송

### 6. 클라이언트 수신 & 브라우저 렌더링

* 브라우저가 응답 패킷을 순서대로 재조립
* HTML 파싱 → CSS 적용 → JS 실행 → 웹페이지 화면 출력
* TCP 연결 종료 (4-way handshake)

**비유:** 편지를 받아 내용을 읽고, 필요한 작업 수행 후 보관

### 한눈에 보기 (TCP/IP 계층 + 비유)

| 계층               | 역할        | 실제 행동              | 비유             |
| ---------------- | --------- | ------------------ | -------------- |
| 응용(Application)  | 사용자 요청/응답 | 브라우저 HTTP 요청 생성    | 편지 작성          |
| 전송(Transport)    | 신뢰성/순서 보장 | TCP 연결, 패킷 분할      | 봉투에 넣고 등기우편 발송 |
| 인터넷(Internet)    | 목적지 라우팅   | IP 주소 붙여 전송        | 주소 라벨, 경로 지정   |
| 네트워크 인터페이스(Link) | 물리 전송     | LAN/Wi-Fi 통해 신호 전달 | 우체부/배달차/비행기    |
